# dam import

Команда приводит список установленных приложений к списку, указанному в файле импорта.
Если указан флаг --restore, то все установленные приложения будут предварительно удалены.


В аргументах команды может быть указан, либо текстовый файл, либо архив.
Текстовый файл содержит список приложений, сформированный командой `dam import`. 
Архив содержит такой же текстовый файл и архивы с образами приложений.

В том случае, если указан архив, то все существующие в архиве приложения предварительно загружаются в `docker images`.
В случае с текстовым файлом, необходимые образы docker загружаются из настроенного registry. 

Перед развертыванием утилита проверяет, все ли необходимые приложения есть в `docker images`.

Далее выполняется следующая последовательность:
- Собирается список приложений уже установленных в системе
- Собирается список, какие будут пропущены при импорте
- Собирается список, какие добавятся новые
- Собирается, какие приложения будут удалены из системы
- Задает вопрос, вы хотите применить изменения в системе
- Удаляет приложения по списку
- Устанавливает приложения по списку

Во время процесса установки удаляются только сами, установленные приложения, кэш докера не чистится.

Из файла-архива могут быть импортированы приложения с любым тэгом.
При этом создаются новые репозитории (если еще не существуют в базе) с именем,
где префикс взят из конфига утилиты плюс порядковый номер. А поле `server` берется из тэга.